{% extends "base.html" %}

{% block title %}Copy reset link{% endblock %}

{% block content %}
<div class="card card-body mx-auto" style="max-width:520px;">
  <h3 class="mb-3">Reset link</h3>
  <p>Email service is not configured. Copy the link below:</p>

  <div class="mb-3">
    <label for="resetLink" class="form-label">Reset URL</label>
    <div class="input-group">
      <input
        id="resetLink"
        type="text"
        class="form-control"
        value="{{ reset_link|default_if_none:'' }}"
        readonly
      >
      <button
        type="button"
        class="btn btn-primary"
        onclick="copyResetLink()"
      >
        Copy
      </button>
    </div>
  </div>

  <a class="btn btn-secondary w-100" href="{% url 'login' %}">Back to login</a>
</div>

<script>
  function copyResetLink() {
    const input = document.getElementById('resetLink');
    const text = input.value;

    if (navigator.clipboard && navigator.clipboard.writeText) {
      navigator.clipboard.writeText(text).then(function () {
        alert('Copied!');
      }).catch(function () {
        // fallback simples
        input.select();
        document.execCommand('copy');
        alert('Copied!');
      });
    } else {
      // fallback para navegadores antigos
      input.select();
      document.execCommand('copy');
      alert('Copied!');
    }
  }
</script>
{% endblock %}
